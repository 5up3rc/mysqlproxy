CHARSETS = {
    #
    # id: charset_name, collation_name, is_default, mblen
    #
    1: ('big5', 'big5_chinese_ci', True, 2),
    2: ('latin2', 'latin2_czech_cs', False, 1),
    3: ('dec8', 'dec8_swedish_ci', True, 1),
    4: ('cp850', 'cp850_general_ci', True, 1),
    5: ('latin1', 'latin1_german1_ci', False, 1),
    6: ('hp8', 'hp8_english_ci', True, 1),
    7: ('koi8r', 'koi8r_general_ci', True, 1),
    8: ('latin1', 'latin1_swedish_ci', True, 1),
    9: ('latin2', 'latin2_general_ci', True, 1),
    10: ('swe7', 'swe7_swedish_ci', True, 1),
    11: ('ascii', 'ascii_general_ci', True, 1),
    12: ('ujis', 'ujis_japanese_ci', True, 3),
    13: ('sjis', 'sjis_japanese_ci', True, 2),
    14: ('cp1251', 'cp1251_bulgarian_ci', False, 1),
    15: ('latin1', 'latin1_danish_ci', False, 1),
    16: ('hebrew', 'hebrew_general_ci', True, 1),
    18: ('tis620', 'tis620_thai_ci', True, 1),
    19: ('euckr', 'euckr_korean_ci', True, 2),
    20: ('latin7', 'latin7_estonian_cs', False, 1),
    21: ('latin2', 'latin2_hungarian_ci', False, 1),
    22: ('koi8u', 'koi8u_general_ci', True, 1),
    23: ('cp1251', 'cp1251_ukrainian_ci', False, 1),
    24: ('gb2312', 'gb2312_chinese_ci', True, 2),
    25: ('greek', 'greek_general_ci', True, 1),
    26: ('cp1250', 'cp1250_general_ci', True, 1),
    27: ('latin2', 'latin2_croatian_ci', False, 1),
    28: ('gbk', 'gbk_chinese_ci', True, 2),
    29: ('cp1257', 'cp1257_lithuanian_ci', False, 1),
    30: ('latin5', 'latin5_turkish_ci', True, 1),
    31: ('latin1', 'latin1_german2_ci', False, 1),
    32: ('armscii8', 'armscii8_general_ci', True, 1),
    33: ('utf8', 'utf8_general_ci', True, 3),
    34: ('cp1250', 'cp1250_czech_cs', False, 1),
    35: ('ucs2', 'ucs2_general_ci', True, 2),
    36: ('cp866', 'cp866_general_ci', True, 1),
    37: ('keybcs2', 'keybcs2_general_ci', True, 1),
    38: ('macce', 'macce_general_ci', True, 1),
    39: ('macroman', 'macroman_general_ci', True, 1),
    40: ('cp852', 'cp852_general_ci', True, 1),
    41: ('latin7', 'latin7_general_ci', True, 1),
    42: ('latin7', 'latin7_general_cs', False, 1),
    43: ('macce', 'macce_bin', False, 1),
    44: ('cp1250', 'cp1250_croatian_ci', False, 1),
    45: ('utf8mb4', 'utf8mb4_general_ci', True, 4),
    46: ('utf8mb4', 'utf8mb4_bin', False, 4),
    47: ('latin1', 'latin1_bin', False, 1),
    48: ('latin1', 'latin1_general_ci', False, 1),
    49: ('latin1', 'latin1_general_cs', False, 1),
    50: ('cp1251', 'cp1251_bin', False, 1),
    51: ('cp1251', 'cp1251_general_ci', True, 1),
    52: ('cp1251', 'cp1251_general_cs', False, 1),
    53: ('macroman', 'macroman_bin', False, 1),
    54: ('utf16', 'utf16_general_ci', True, 4),
    55: ('utf16', 'utf16_bin', False, 4),
    57: ('cp1256', 'cp1256_general_ci', True, 1),
    58: ('cp1257', 'cp1257_bin', False, 1),
    59: ('cp1257', 'cp1257_general_ci', True, 1),
    60: ('utf32', 'utf32_general_ci', True, 4),
    61: ('utf32', 'utf32_bin', False, 4),
    63: ('binary', 'binary', True, 1),
    64: ('armscii8', 'armscii8_bin', False, 1),
    65: ('ascii', 'ascii_bin', False, 1),
    66: ('cp1250', 'cp1250_bin', False, 1),
    67: ('cp1256', 'cp1256_bin', False, 1),
    68: ('cp866', 'cp866_bin', False, 1),
    69: ('dec8', 'dec8_bin', False, 1),
    70: ('greek', 'greek_bin', False, 1),
    71: ('hebrew', 'hebrew_bin', False, 1),
    72: ('hp8', 'hp8_bin', False, 1),
    73: ('keybcs2', 'keybcs2_bin', False, 1),
    74: ('koi8r', 'koi8r_bin', False, 1),
    75: ('koi8u', 'koi8u_bin', False, 1),
    77: ('latin2', 'latin2_bin', False, 1),
    78: ('latin5', 'latin5_bin', False, 1),
    79: ('latin7', 'latin7_bin', False, 1),
    80: ('cp850', 'cp850_bin', False, 1),
    81: ('cp852', 'cp852_bin', False, 1),
    82: ('swe7', 'swe7_bin', False, 1),
    83: ('utf8', 'utf8_bin', False, 3),
    84: ('big5', 'big5_bin', False, 2),
    85: ('euckr', 'euckr_bin', False, 2),
    86: ('gb2312', 'gb2312_bin', False, 2),
    87: ('gbk', 'gbk_bin', False, 2),
    88: ('sjis', 'sjis_bin', False, 2),
    89: ('tis620', 'tis620_bin', False, 1),
    90: ('ucs2', 'ucs2_bin', False, 2),
    91: ('ujis', 'ujis_bin', False, 3),
    92: ('geostd8', 'geostd8_general_ci', True, 1),
    93: ('geostd8', 'geostd8_bin', False, 1),
    94: ('latin1', 'latin1_spanish_ci', False, 1),
    95: ('cp932', 'cp932_japanese_ci', True, 2),
    96: ('cp932', 'cp932_bin', False, 2),
    97: ('eucjpms', 'eucjpms_japanese_ci', True, 3),
    98: ('eucjpms', 'eucjpms_bin', False, 3),
    99: ('cp1250', 'cp1250_polish_ci', False, 1),
    101: ('utf16', 'utf16_unicode_ci', False, 4),
    102: ('utf16', 'utf16_icelandic_ci', False, 4),
    103: ('utf16', 'utf16_latvian_ci', False, 4),
    104: ('utf16', 'utf16_romanian_ci', False, 4),
    105: ('utf16', 'utf16_slovenian_ci', False, 4),
    106: ('utf16', 'utf16_polish_ci', False, 4),
    107: ('utf16', 'utf16_estonian_ci', False, 4),
    108: ('utf16', 'utf16_spanish_ci', False, 4),
    109: ('utf16', 'utf16_swedish_ci', False, 4),
    110: ('utf16', 'utf16_turkish_ci', False, 4),
    111: ('utf16', 'utf16_czech_ci', False, 4),
    112: ('utf16', 'utf16_danish_ci', False, 4),
    113: ('utf16', 'utf16_lithuanian_ci', False, 4),
    114: ('utf16', 'utf16_slovak_ci', False, 4),
    115: ('utf16', 'utf16_spanish2_ci', False, 4),
    116: ('utf16', 'utf16_roman_ci', False, 4),
    117: ('utf16', 'utf16_persian_ci', False, 4),
    118: ('utf16', 'utf16_esperanto_ci', False, 4),
    119: ('utf16', 'utf16_hungarian_ci', False, 4),
    120: ('utf16', 'utf16_sinhala_ci', False, 4),
    128: ('ucs2', 'ucs2_unicode_ci', False, 2),
    129: ('ucs2', 'ucs2_icelandic_ci', False, 2),
    130: ('ucs2', 'ucs2_latvian_ci', False, 2),
    131: ('ucs2', 'ucs2_romanian_ci', False, 2),
    132: ('ucs2', 'ucs2_slovenian_ci', False, 2),
    133: ('ucs2', 'ucs2_polish_ci', False, 2),
    134: ('ucs2', 'ucs2_estonian_ci', False, 2),
    135: ('ucs2', 'ucs2_spanish_ci', False, 2),
    136: ('ucs2', 'ucs2_swedish_ci', False, 2),
    137: ('ucs2', 'ucs2_turkish_ci', False, 2),
    138: ('ucs2', 'ucs2_czech_ci', False, 2),
    139: ('ucs2', 'ucs2_danish_ci', False, 2),
    140: ('ucs2', 'ucs2_lithuanian_ci', False, 2),
    141: ('ucs2', 'ucs2_slovak_ci', False, 2),
    142: ('ucs2', 'ucs2_spanish2_ci', False, 2),
    143: ('ucs2', 'ucs2_roman_ci', False, 2),
    144: ('ucs2', 'ucs2_persian_ci', False, 2),
    145: ('ucs2', 'ucs2_esperanto_ci', False, 2),
    146: ('ucs2', 'ucs2_hungarian_ci', False, 2),
    147: ('ucs2', 'ucs2_sinhala_ci', False, 2),
    149: ('ucs2', 'ucs2_croatian_ci', False, 2),
    159: ('ucs2', 'ucs2_general_mysql500_ci', False, 2),
    160: ('utf32', 'utf32_unicode_ci', False, 4),
    161: ('utf32', 'utf32_icelandic_ci', False, 4),
    162: ('utf32', 'utf32_latvian_ci', False, 4),
    163: ('utf32', 'utf32_romanian_ci', False, 4),
    164: ('utf32', 'utf32_slovenian_ci', False, 4),
    165: ('utf32', 'utf32_polish_ci', False, 4),
    166: ('utf32', 'utf32_estonian_ci', False, 4),
    167: ('utf32', 'utf32_spanish_ci', False, 4),
    168: ('utf32', 'utf32_swedish_ci', False, 4),
    169: ('utf32', 'utf32_turkish_ci', False, 4),
    170: ('utf32', 'utf32_czech_ci', False, 4),
    171: ('utf32', 'utf32_danish_ci', False, 4),
    172: ('utf32', 'utf32_lithuanian_ci', False, 4),
    173: ('utf32', 'utf32_slovak_ci', False, 4),
    174: ('utf32', 'utf32_spanish2_ci', False, 4),
    175: ('utf32', 'utf32_roman_ci', False, 4),
    176: ('utf32', 'utf32_persian_ci', False, 4),
    177: ('utf32', 'utf32_esperanto_ci', False, 4),
    178: ('utf32', 'utf32_hungarian_ci', False, 4),
    179: ('utf32', 'utf32_sinhala_ci', False, 4),
    192: ('utf8', 'utf8_unicode_ci', False, 3),
    193: ('utf8', 'utf8_icelandic_ci', False, 3),
    194: ('utf8', 'utf8_latvian_ci', False, 3),
    195: ('utf8', 'utf8_romanian_ci', False, 3),
    196: ('utf8', 'utf8_slovenian_ci', False, 3),
    197: ('utf8', 'utf8_polish_ci', False, 3),
    198: ('utf8', 'utf8_estonian_ci', False, 3),
    199: ('utf8', 'utf8_spanish_ci', False, 3),
    200: ('utf8', 'utf8_swedish_ci', False, 3),
    201: ('utf8', 'utf8_turkish_ci', False, 3),
    202: ('utf8', 'utf8_czech_ci', False, 3),
    203: ('utf8', 'utf8_danish_ci', False, 3),
    204: ('utf8', 'utf8_lithuanian_ci', False, 3),
    205: ('utf8', 'utf8_slovak_ci', False, 3),
    206: ('utf8', 'utf8_spanish2_ci', False, 3),
    207: ('utf8', 'utf8_roman_ci', False, 3),
    208: ('utf8', 'utf8_persian_ci', False, 3),
    209: ('utf8', 'utf8_esperanto_ci', False, 3),
    210: ('utf8', 'utf8_hungarian_ci', False, 3),
    211: ('utf8', 'utf8_sinhala_ci', False, 3),
    213: ('utf8', 'utf8_croatian_ci', False, 3),
    214: ('utf32', 'utf32_croatian_ci', False, 4),
    215: ('utf16', 'utf16_croatian_ci', False, 4),
    223: ('utf8', 'utf8_general_mysql500_ci', False, 3),
    224: ('utf8mb4', 'utf8mb4_unicode_ci', False, 4),
    225: ('utf8mb4', 'utf8mb4_icelandic_ci', False, 4),
    226: ('utf8mb4', 'utf8mb4_latvian_ci', False, 4),
    227: ('utf8mb4', 'utf8mb4_romanian_ci', False, 4),
    228: ('utf8mb4', 'utf8mb4_slovenian_ci', False, 4),
    229: ('utf8mb4', 'utf8mb4_polish_ci', False, 4),
    230: ('utf8mb4', 'utf8mb4_estonian_ci', False, 4),
    231: ('utf8mb4', 'utf8mb4_spanish_ci', False, 4),
    232: ('utf8mb4', 'utf8mb4_swedish_ci', False, 4),
    233: ('utf8mb4', 'utf8mb4_turkish_ci', False, 4),
    234: ('utf8mb4', 'utf8mb4_czech_ci', False, 4),
    235: ('utf8mb4', 'utf8mb4_danish_ci', False, 4),
    236: ('utf8mb4', 'utf8mb4_lithuanian_ci', False, 4),
    237: ('utf8mb4', 'utf8mb4_slovak_ci', False, 4),
    238: ('utf8mb4', 'utf8mb4_spanish2_ci', False, 4),
    239: ('utf8mb4', 'utf8mb4_roman_ci', False, 4),
    240: ('utf8mb4', 'utf8mb4_persian_ci', False, 4),
    241: ('utf8mb4', 'utf8mb4_esperanto_ci', False, 4),
    242: ('utf8mb4', 'utf8mb4_hungarian_ci', False, 4),
    243: ('utf8mb4', 'utf8mb4_sinhala_ci', False, 4),
    245: ('utf8mb4', 'utf8mb4_croatian_ci', False, 4),
}

CHARSETS_BY_NAME = {}
for charset_id, charset_info in CHARSETS.items():
    if charset_info[2]:
        CHARSETS_BY_NAME[charset_info[0]] = (charset_id, charset_info)

def charset_encode(mystr, encoding='utf8'):
    if encoding == 'binary':
        return mystr
    if encoding == 'utf8mb4':
        encoding = 'utf8'
    return mystr.encode(encoding)

def charset_decode(mystr, encoding='utf8'):
    if encoding == 'binary':
        return mystr
    if encoding == 'utf8mb4':
        encoding = 'utf8'
    return mystr.decode(encoding)
